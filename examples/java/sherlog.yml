preferences:
  default-fallback-mode: append
  show-added-entries:    true
  add-metadata:          true

models:
  java:
    format: '{@exception}{#timestamp} {#level|-5} {#category} {#thread} {#message}'
    attributes:
      timestamp:
        type:      datetime
        indexable: false
        format:    yyyy-MM-dd HH:mm:ss,SSS

      level:
        type:      enum
        indexable: true
        values:    TRACE,DEBUG,INFO,WARN,ERROR,FATAL

      category:
        type:      text
        indexable: true

      thread:
        type:      text
        indexable: true

      exception:
        type:        text
        indexable:   true
        multivalued: true

      message:
        type:      text
        indexable: false

      code:
        type:      text
        indexable: true

readers:
  file:
    type:               file
    charset:            UTF-8
    remove-ansi-colors: true

  socket:
    type:               socket
    charset:            UTF-8
    remove-ansi-colors: true

parsers:
  infinispan:
    type:               regex
    pattern:            '{{timestamp}} {{level}}\s+{{thread}} {{category}} {{message}}'
    remove-ansi-colors: true

  wildfly:
    type:               regex
    pattern:            '{{timestamp}} {{level}}\s+{{category}} {{thread}} {{message}}'
    remove-ansi-colors: true

mappers:
  java:
    type: function
    copy: timestamp,level,category,thread,code,message

patterns:
  timestamp: '(?<timestamp>\d{2,4}-\d{2}-\d{2,4} \d{2}:\d{2}:\d{2},\d{3})'
  level:     '(?<level>\w+)'
  category:  '\[(?<thread>[^]]+)]'
  thread:    '\((?<category>[^)]+)\)'
  message:   '(?<message>((?<code>\w{4,}): )?.+)'

steps:
  java:
    - map:
        from:  message
        regex: '(?<exception>\w+(\.\w+)+(Exception|Error))'

pipelines:
  wildfly:
    model:  java
    parser: wildfly
    mapper: java
    steps:  java

  infinispan:
    model:  java
    parser: infinispan
    mapper: java
    steps:  java

icons:
  attribute-timestamp: nf-fa-calendar
  attribute-level:     nf-fa-signal
  attribute-category:  nf-fa-folder_open
  attribute-thread:    nf-fa-code_fork
  attribute-message:   nf-mdi-message
  attribute-exception: nf-fa-bug

styles:
  attribute-timestamp:   grey//i

  attribute-level-TRACE: cyan
  attribute-level-DEBUG: cyan
  attribute-level-INFO:  orange
  attribute-level-WARN:  yellow
  attribute-level-ERROR: red//b
  attribute-level-FATAL: red//b

  attribute-category:    blue
  attribute-thread:      grey
  attribute-message:     white
  attribute-exception:   red
